# ==============================================
# LOCAL DEVELOPMENT ENVIRONMENT VARIABLES
# ==============================================

# Database - Local Development
# Use this format for local development with Docker/local PostgreSQL
DATABASE_URL="postgresql://user:password@localhost:5432/novel_ocr_admin"

# NextAuth - Required
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET="your-secret-key-here-generate-with-openssl-rand-base64-32"
NEXTAUTH_URL="http://localhost:3000"
AUTH_SECRET="your-auth-secret-here-same-as-nextauth-secret"

# API Configuration - Local
NEXT_PUBLIC_API_URL="http://localhost:3000"

# Admin Password for Database Seeding (optional for local dev)
ADMIN_PASSWORD="admin123"

# ==============================================
# GOOGLE CLOUD RUN ENVIRONMENT VARIABLES
# ==============================================
# Set these in Cloud Run environment variables
# The startup script will construct DATABASE_URL from these

# Database - Cloud Run (Cloud SQL)
# DB_HOST="your-cloud-sql-instance-connection-name or IP"
# DB_USER="postgres"
# DB_NAME="novel_ocr_admin"
# DB_PASSWORD="your-secure-password"

# Admin Password - Cloud Run (Required for initial setup)
# ADMIN_PASSWORD="your-secure-admin-password"

# NextAuth - Cloud Run
# NEXTAUTH_SECRET="your-production-secret-key"
# NEXTAUTH_URL="https://your-cloud-run-service-url"
# AUTH_SECRET="same-as-nextauth-secret"

# API Configuration - Cloud Run
# NEXT_PUBLIC_API_URL="https://your-cloud-run-service-url"

# Port - Cloud Run (automatically set by Cloud Run)
# PORT=8080

# ==============================================
# GOOGLE CLOUD SERVICES (OCR System)
# ==============================================
# Google Cloud Project ID
GOOGLE_CLOUD_PROJECT_ID="your-gcp-project-id"

# Path to GCP service account credentials JSON file (local dev)
# For Cloud Run, use workload identity instead
GOOGLE_APPLICATION_CREDENTIALS="./path/to/service-account-key.json"

# Google Cloud Storage Bucket Name
GCS_BUCKET_NAME="your-project-id-manuscripts"

# ==============================================
# REDIS CONFIGURATION
# ==============================================
# Redis connection for BullMQ job queue
REDIS_URL="redis://localhost:6379"
REDIS_HOST="localhost"
REDIS_PORT="6379"
REDIS_PASSWORD=""

# For Cloud Run with Memorystore Redis:
# REDIS_URL="redis://your-memorystore-ip:6379"
# REDIS_HOST="your-memorystore-ip"
# REDIS_PORT="6379"
# REDIS_PASSWORD="your-redis-password"

# ==============================================
# OCR CONFIGURATION
# ==============================================
# Maximum PDF file size in megabytes
PDF_MAX_SIZE_MB="50"

# Minimum OCR confidence threshold (0-100)
OCR_CONFIDENCE_THRESHOLD="70"

# Maximum retry attempts for failed OCR jobs
OCR_MAX_RETRIES="3"

# OCR processing timeout in seconds
OCR_TIMEOUT_SECONDS="55"

# Worker concurrency (number of parallel jobs)
WORKER_CONCURRENCY="5"

# Worker rate limit (max requests per duration)
WORKER_RATE_LIMIT_MAX="10"
WORKER_RATE_LIMIT_DURATION="1000"

# ==============================================
# MALWARE SCANNING (Optional)
# ==============================================
# Enable ClamAV malware scanning
ENABLE_MALWARE_SCAN="false"

# ClamAV server configuration (if enabled)
CLAMAV_HOST="localhost"
CLAMAV_PORT="3310"

# ==============================================
# OPTIONAL SERVICES
# ==============================================
# Sentry for error tracking
SENTRY_DSN=""

# ==============================================
# CLOUD RUN DEPLOYMENT NOTES
# ==============================================
# 1. Set all required environment variables in Cloud Run console
# 2. For Cloud SQL, use the private IP or connection name in DB_HOST
# 3. ADMIN_PASSWORD will be used to create/update the admin user on first deployment
# 4. Ensure NextAuth secrets are strong and unique for production
# 5. The app will automatically listen on port 8080 (Cloud Run standard)
